---
title: "인턴 교육 2주차 과제:"
draft: true
---

-  제출일: 2024년 N월 N일 요일
-  제출자: 배정환 인턴

**세부과제**
1. 네이버 OPEN API 이용
    - 검색어에 대한 20개의 상품을 찾는다.
    - 중고, 렌탈은 제외한다.

2. Pandas를 이용한 데이터프레임 저장
    - 출력된 각 key들의 의미에 대해 이해한다.
    - (column: 상품id, 상품명, 제조사, 최저가, 이미지링크, 구매링크)을 가진 데이터프레임을 만든다.(변수명은 자유)
    - csv로 저장한다.
3. Python 코드로 함수 작성
    - 키워드(검색어)만 입력하면 바로 저장될 수 있도록 함수를 만든다.

**목표**

업무 자동화 시스템을 만들면서 OPEN API에 대한 이해와 데이터 저장에 대한 스킬을 높인다.

**팁**
- 모든 정보에 대한 검색은 공식 문서를 가장 먼저 확인해보는 것이 좋다.
1. [네이버 OPEN API에 대한 가이드](https://developers.naver.com/docs/common/openapiguide/)
2. [Pandas API reference](https://pandas.pydata.org/docs/reference/index.html)
3. [Python Documentation](https://docs.python.org/ko/3/)

### 2024-06-05

1. 일단 처음 API 를 함수에 연결하는 법에 대해서부터 해본다.
	- `display=20`: 검색어에 대한 20개의 상품이 출력되도록  했다.
	-  `&exclude=used:rental`: 중고와 렌탈을 제외했다.
```python
import os
import urllib.parse
import urllib.request

from dotenv import load_dotenv
load_dotenv()

def searh_naver_shopping(keyword):
    client_id = os.getenv("NAVER_CLIENT_ID")
    client_key = os.getenv("NAVER_CLIENT_KEY")
    encrypt_text = urllib.parse.quote(keyword)

    url = "https://openapi.naver.com/v1/search/shop?query="+ encrypt_text +"&display=20&exclude=used:rental"

    req_url = urllib.request.Request(url)
    req_url.add_header("X-Naver-Client-Id", client_id)
    req_url.add_header("X-Naver-Client-Secret", client_key)

    response = urllib.request.urlopen(req_url)
    resp_code = response.getcode()

    if resp_code == 200:
        shop_output = response.read().decode("utf-8")
    else:
        shop_output = "Error" + resp_code
    return shop_output

keyword_input = searh_naver_shopping("반팔티")
print(keyword_input)
```

- 첫번째 과제 Clear
---
2. Pandas를 이용한 데이터프레임 저장
- 위의 코드로 받은 json파일은 string으로 되어있다. 이를 바꿀려면
```python
import json

# 받은 json파일의 텍스트를 text로 칭할 때
json.loads(text)
```
- csv파일로 바꾸기 위해서는 `to_csv()`함수를 써야한다고 하셨다.
- pandas에서 json파일을 읽는 방법
![](https://imgur.com/hWNGkQa.png)

- `read_json`함수에 path를 넣으면 되지 않을까?
- 일단 함수에 나오는 출력값을 json파일에 옮겨 넣어야한다.
- [[과제 공부용#파일 입출력에 대하여| Python 파일 입출력]] 
- [[과제 공부용#json.dump와 json.dumps의 차이 & json.loads에 대하여|json.dump와 json.dump/json.load와 json.loads의 차이]] 
```python
import json
import pandas as pd

json_input = json.loads(keyword_input)
# print(json_input)
print(json.dumps(json_input))
# shop_review=pd.read_json(path_or_buf="", orient=json_input)
with open("naver_news_shopping.json", 'w', encoding="utf-8") as json_file:
    json.dump(json_input, json_file, ensure_ascii=False, sort_keys=True, indent="\t")
```
